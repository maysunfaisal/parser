schemaVersion: 2.0.0
metadata:
  name: nodejs
  version: 1.0.0
# variables:
#   image: image-from-top-level-variable
#   install: npm install
components:
- name: runtime
  container:
    image: "{{image}}"
    memoryLimit: "{{memory}}"
    mountSources: true
    sourceMapping: /project
    command:
    - npm install
    endpoints:
    - name: http-8888
      targetPort: 8888
commands:
- id: install
  exec:
    commandLine: "{{install}}"
    component: runtime
    workingDir: /project
    group:
      isDefault: false
      kind: build
- id: run
  exec:
    commandLine: npm start
    component: runtime
    workingDir: /project
    group:
      isDefault: false
      kind: run
